<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Tap Master</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0e0e0e;
    color: #fff;
    touch-action: manipulation;
    overflow: hidden;
  }
  h1 {
    color: #00e676;
    text-shadow: 0 0 10px #00e67666;
  }
  button {
    border: none;
    cursor: pointer;
  }

  /* --- Start Page --- */
  #startPage {
    position: relative;
    height: 100vh;
    background: url('https://via.placeholder.com/600x1000?text=Tap+Master+Image')
                center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  #startBtn {
    position: absolute;
    bottom: 120px;
    padding: 15px 40px;
    font-size: 22px;
    font-weight: bold;
    background: linear-gradient(90deg, #00e676, #00b0ff);
    color: #000;
    border-radius: 10px;
  }
  footer {
    position: absolute;
    bottom: 20px;
    width: 100%;
    text-align: center;
    font-size: 14px;
    opacity: 0.7;
  }

  /* --- Modal --- */
  #modal, #spinner, #resultModal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  .modal-box {
    background: #1e1e1e;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    width: 80%;
    max-width: 320px;
  }
  .modal-box button {
    margin: 10px;
    padding: 10px 25px;
    font-weight: bold;
    border-radius: 8px;
  }

  /* --- Spinner --- */
  .loader {
    border: 6px solid #333;
    border-top: 6px solid #00e676;
    border-radius: 50%;
    width: 60px; height: 60px;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {100%{transform: rotate(360deg);}}

  /* --- Game Page --- */
  #gamePage {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    height: 100vh;
    padding: 20px;
    box-sizing: border-box;
  }

  .stats {
    text-align: center;
  }

  #bonusContainer {
    width: 280px;
    height: 22px;
    background: #333;
    border-radius: 12px;
    overflow: hidden;
    margin: 20px auto 10px;
    box-shadow: 0 0 10px #00e67644;
  }
  #bonusBar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00e676, #00b0ff);
    transition: width 0.2s;
  }

  #tapButton {
    width: 150px; height: 150px;
    border-radius: 50%;
    background: radial-gradient(circle at top left, #00e676, #00b0ff);
    font-size: 22px; font-weight: bold;
    color: #000;
    box-shadow: 0 0 25px #00e676aa;
    animation: pulse 1.5s infinite;
  }
  @keyframes pulse {
    0% {box-shadow:0 0 10px #00e67666;transform:scale(1);}
    50% {box-shadow:0 0 25px #00e676cc;transform:scale(1.05);}
    100% {box-shadow:0 0 10px #00e67666;transform:scale(1);}
  }
  #tapButton:active {transform:scale(0.95);}

  /* Floating +‚Ç¶1.00 */
  .floatText {
    position: absolute;
    color: #00ff95;
    font-weight: bold;
    font-size: 20px;
    opacity: 0;
    animation: floatUp 0.8s ease-out forwards;
  }
  @keyframes floatUp {
    0% {opacity:1; transform:translate(0,0);}
    100% {opacity:0; transform:translate(var(--x,0px), -80px);}
  }

  /* Confetti simple */
  .confetti {
    position: fixed;
    width: 8px; height: 8px;
    background: var(--color);
    top: 50%; left: 50%;
    opacity: 0.9;
    animation: confettiFall 1s ease-out forwards;
  }
  @keyframes confettiFall {
    to {transform: translate(var(--x), var(--y)) rotate(720deg); opacity:0;}
  }

  #leaderboard {text-align:left; width:90%; max-width:320px;}
  #leaderboard ol {padding-left:20px;}
</style>
</head>
<body>

<!-- Start Page -->
<div id="startPage">
  <h1>TAP MASTER</h1>
  <button id="startBtn">Play</button>
  <footer>¬© 2025 Tap Master Studios</footer>
</div>

<!-- Modal -->
<div id="modal">
  <div class="modal-box">
    <p>Play <b>Tap Master</b> for <b>200 ‚≠êÔ∏è</b>?</p>
    <button id="yesBtn">Yes</button>
    <button id="noBtn">Cancel</button>
  </div>
</div>

<!-- Spinner -->
<div id="spinner">
  <div class="loader"></div>
  <p>Loading Tap Arena...</p>
</div>

<!-- Game Page -->
<div id="gamePage">
  <div class="stats">
    <p>‚è± Time Left: <span id="timer">60</span>s</p>
    <p>üëÜ Taps: <span id="tapCount">0</span></p>
    <p>üíµ Earnings: ‚Ç¶<span id="earnings">0.00</span></p>
  </div>

  <div id="bonusContainer">
    <div id="bonusBar"></div>
  </div>

  <button id="tapButton">TAP</button>

  <div id="leaderboard">
    <h3>üèÜ Leaderboard</h3>
    <ol id="scores"></ol>
  </div>
</div>

<!-- Result Modal -->
<div id="resultModal">
  <div class="modal-box">
    <h2>Time‚Äôs Up!</h2>
    <p>üëÜ Taps: <span id="finalTaps">0</span></p>
    <p>üíµ Cash Earned: ‚Ç¶<span id="finalEarnings">0.00</span></p>
    <button id="playAgain">Play Again</button>
  </div>
</div>

<audio id="tapSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>

<script>
const startPage = document.getElementById('startPage');
const modal = document.getElementById('modal');
const spinner = document.getElementById('spinner');
const gamePage = document.getElementById('gamePage');
const resultModal = document.getElementById('resultModal');
const yesBtn = document.getElementById('yesBtn');
const noBtn = document.getElementById('noBtn');
const startBtn = document.getElementById('startBtn');
const playAgain = document.getElementById('playAgain');
const tapButton = document.getElementById('tapButton');
const tapSound = document.getElementById('tapSound');
const timerEl = document.getElementById('timer');
const tapCountEl = document.getElementById('tapCount');
const earningsEl = document.getElementById('earnings');
const bonusBar = document.getElementById('bonusBar');
const finalTapsEl = document.getElementById('finalTaps');
const finalEarningsEl = document.getElementById('finalEarnings');
const scoresEl = document.getElementById('scores');

let taps=0, earnings=0, timer=60, timerInterval, bonusProgress=0, bonusTriggered=false;

startBtn.onclick=()=>modal.style.display='flex';
noBtn.onclick=()=>modal.style.display='none';

yesBtn.onclick=()=>{
  modal.style.display='none';
  spinner.style.display='flex';
  setTimeout(()=>{
    spinner.style.display='none';
    startGame();
  },2000);
};

function startGame(){
  taps=0; earnings=0; bonusProgress=0; bonusTriggered=false; timer=60;
  startPage.style.display='none';
  gamePage.style.display='flex';
  updateStats();
  timerInterval=setInterval(()=>{
    timer--;
    timerEl.textContent=timer;
    if(timer<=0) endGame();
  },1000);
}

tapButton.onclick=(e)=>{
  if(timer<=0) return;
  taps++;
  earnings++;
  tapCountEl.textContent=taps;
  earningsEl.textContent=earnings.toFixed(2);
  tapSound.currentTime=0;
  tapSound.play().catch(()=>{});
  if (navigator.vibrate) navigator.vibrate(20);

  // floating +‚Ç¶1
  const float = document.createElement('div');
  float.classList.add('floatText');
  float.textContent = "+‚Ç¶1.00";
  const rect = tapButton.getBoundingClientRect();
  const angle = Math.random()*360;
  const radius = 30 + Math.random()*40;
  const x = Math.cos(angle)*radius;
  float.style.setProperty('--x', `${x}px`);
  float.style.left = rect.left + rect.width/2 + "px";
  float.style.top = rect.top + rect.height/2 + "px";
  document.body.appendChild(float);
  setTimeout(()=>float.remove(),800);

  // bonus bar
  if(!bonusTriggered){
    bonusProgress += 1; // 100 taps to fill
    if(bonusProgress>=100){
      bonusTriggered=true;
      bonusProgress=100;
      triggerBonus();
    }
    bonusBar.style.width=bonusProgress+"%";
  }
};

function triggerBonus(){
  earnings += 500;
  earningsEl.textContent=earnings.toFixed(2);
  confettiBurst();
}

function confettiBurst(){
  for(let i=0;i<30;i++){
    const c=document.createElement('div');
    c.classList.add('confetti');
    c.style.setProperty('--color', `hsl(${Math.random()*360},100%,60%)`);
    c.style.setProperty('--x', `${(Math.random()-0.5)*600}px`);
    c.style.setProperty('--y', `${(Math.random()-0.5)*400}px`);
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),1000);
  }
}

function endGame(){
  clearInterval(timerInterval);
  gamePage.style.display='none';
  resultModal.style.display='flex';
  finalTapsEl.textContent=taps;
  finalEarningsEl.textContent=earnings.toFixed(2);
  saveScore(taps,earnings);
  showLeaderboard();
}

playAgain.onclick=()=>{
  resultModal.style.display='none';
  startPage.style.display='flex';
};

function updateStats(){
  timerEl.textContent=timer;
  tapCountEl.textContent=taps;
  earningsEl.textContent=earnings.toFixed(2);
  bonusBar.style.width='0%';
}

function saveScore(taps,earnings){
  let scores=JSON.parse(localStorage.getItem('tapScores'))||[];
  scores.push({taps,earnings,date:new Date().toLocaleString()});
  scores.sort((a,b)=>b.taps-a.taps);
  localStorage.setItem('tapScores',JSON.stringify(scores.slice(0,5)));
}
function showLeaderboard(){
  let scores=JSON.parse(localStorage.getItem('tapScores'))||[];
  scoresEl.innerHTML=scores.map(
    (s,i)=>`<li>#${i+1} - ${s.taps} taps (‚Ç¶${s.earnings.toFixed(2)})</li>`
  ).join('');
}
showLeaderboard();
</script>
</body>
</html>